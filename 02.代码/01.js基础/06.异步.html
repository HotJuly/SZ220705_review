<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /*
      异步
        将一件事情放到未来的某个时间去做,这就是异步(懒)
        将一个函数延迟一段时间执行,这就是异步

      回调函数的定义
        1.我创建的
        2.我没调用
        3.他执行了
        
      问题:请问回调函数一定是异步的吗?
      回答:不一定是异步的,像是数组的回调函数,Promise的回调函数都是同步执行的

      问题:js中,异步任务分为几种?
        1.宏任务
        2.微任务

        异步任务一定晚于主线程代码执行

        存储多个宏任务的队列称为宏任务队列
        存储多个微任务的队列称为微任务队列

      队列
        数据类型:数组
        特点:先进先出,后进后出

      栈
        数据类型:数组
        特点:先进后出,后进先出


      执行顺序:先执行主线程代码->清空微任务队列->执行宏任务
        注意:微任务队列都是清空,不清空不能走,
            宏任务是执行,每执行完一个宏任务,就要去看一下微任务队列是否有东西,有就清空

      宏任务:
        1.定时器
        2.事件相关
        3.ajax相关

      微任务:
        1.then方法
        2.mutationObserver(这是html5新增特性)
          它可以监视页面上某个节点的结构变化,只要发生变化就会触发对应的回调函数

      以上这些都是开启宏任务/微任务的方法/手段

    问题:请问js中,宏任务优先还是微任务优先?
    回答:
      1.如果将script标签中的代码,当作第一个宏任务来看待,那么就是宏任务优先
      2.如果不将script标签中的代码,当作宏任务看待,那么就是微任务优先

      所谓的script标签中的代码,其实就是我们平常说的主线程代码
    
    */
    // [1, 2, 3].forEach(item => {
    //   console.log(item)
    // })
    // console.log('a forEach()之后')

    // new Promise((resolve, reject) => { // excutor  执行器函数
    //   console.log('b 执行excutor')
    // })

    // console.log('c new Promise()之后')

    // setTimeout(() => {
    //   console.log('d 执行timout回调')
    // }, 0);

    // console.log('e setTimeout()之后')

    // Promise.resolve(1).then(() => {
    //   console.log('f promise成功的回调')
    // })

    // Promise.resolve(1).then(() => {
    //   console.log('g promise成功的回调')
    // })

    // console.log('h .then之后')


    
    setTimeout(() => {
      console.log('1')

      Promise.resolve(1).then(() => {
        console.log('2')
      })

      Promise.resolve(1).then(() => {
        console.log('3')
      })
    }, 0);

    Promise.resolve(1).then(() => {
      console.log('4')
    });

    setTimeout(() => {
      console.log('5')
    }, 0);

  </script>
</body>
</html>